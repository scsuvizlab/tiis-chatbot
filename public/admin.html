<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIIS Admin Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
        /* Admin-specific styles */
        .admin-container {
            display: flex;
            min-height: 100vh;
            background: var(--bg-primary);
        }
        
        .admin-sidebar {
            width: 250px;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1rem;
        }
        
        .admin-main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }
        
        .tab-button {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            margin-bottom: 0.5rem;
            text-align: left;
            background: none;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        
        .tab-button:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .tab-button.active {
            background: var(--primary-color);
            color: white;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <div class="admin-sidebar">
            <h2 style="margin-bottom: 2rem; color: var(--text-primary);">TIIS Admin</h2>
            
            <button id="users-tab" class="tab-button active" onclick="showSection('users')">
                ðŸ‘¥ User Management
            </button>
            
            <button id="reports-tab" class="tab-button" onclick="showSection('reports')">
                ðŸ“Š Reports
            </button>
            
            <!-- â­ NEW: Tools & Platforms Tab -->
            <button id="tools-tab" class="tab-button" onclick="showSection('tools')">
                ðŸ”§ Tools & Platforms
            </button>
            
            <button id="export-tab" class="tab-button" onclick="showSection('export')">
                ðŸ’¾ Data Export
            </button>
            
            <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border-color);">
            
            <button id="logout-btn" class="tab-button" onclick="handleLogout()">
                ðŸšª Logout
            </button>
        </div>
        
        <!-- Main Content Area -->
        <div class="admin-main">
            <!-- Login Screen -->
            <div id="login-screen" class="section active">
                <div style="max-width: 400px; margin: 4rem auto;">
                    <h1 style="margin-bottom: 2rem;">Admin Login</h1>
                    
                    <form id="admin-login-form">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem;">Admin Password</label>
                            <input type="password" id="admin-password" required 
                                   style="width: 100%; padding: 0.75rem; border-radius: 6px; border: 1px solid var(--border-color);">
                        </div>
                        
                        <div id="login-error" class="hidden" style="color: var(--error-color); margin-bottom: 1rem;"></div>
                        
                        <button type="submit" class="button-primary" style="width: 100%;">
                            Login
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Users Section -->
            <div id="users-section" class="section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h1>ðŸ‘¥ User Management</h1>
                    <button id="create-user-btn" class="button-primary">+ Create User</button>
                </div>
                
                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Total Users</div>
                        <div class="stat-value" id="stat-total-users">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Onboarding Complete</div>
                        <div class="stat-value" id="stat-onboarding">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Tasks</div>
                        <div class="stat-value" id="stat-tasks">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Messages</div>
                        <div class="stat-value" id="stat-messages">-</div>
                    </div>
                </div>
                
                <!-- Users Table -->
                <div id="users-table-container"></div>
            </div>
            
            <!-- Reports Section -->
            <div id="reports-section" class="section">
                <h1>ðŸ“Š Reports</h1>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                    Generate AI-powered analysis reports for your organization
                </p>
                
                <div id="reports-content">
                    <!-- Report generation UI goes here -->
                    <p>Report generation interface</p>
                </div>
            </div>
            
            <!-- â­ NEW: Tools & Platforms Section -->
            <div id="tools-section" class="section">
                <h1>ðŸ”§ Tools & Platforms</h1>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                    View and analyze software, tools, and platforms used across your organization
                </p>
                
                <!-- Tools content will be dynamically loaded here -->
                <div id="tools-container"></div>
            </div>
            
            <!-- Export Section -->
            <div id="export-section" class="section">
                <h1>ðŸ’¾ Data Export</h1>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                    Export all conversation data and user information
                </p>
                
                <div id="export-content">
                    <button id="export-all-btn" class="button-primary">
                        Download All Data (JSON)
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Load Scripts -->
    <script src="/admin-dashboard.js"></script>
    <script src="/admin-tools-manager.js"></script> <!-- â­ NEW: Tools manager UI -->
</body>
</html>
